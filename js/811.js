(self.webpackChunk=self.webpackChunk||[]).push([[811],{5811:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var n=i(5180),a=i(8640),s=i(4549),c="data/defaultCities.json",r=[];fetch(c).then((function(t){return t.json()})).then((function(t){return r=t})).catch((function(t){}));var h=function(){function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3?arguments[3]:void 0;(0,n.Z)(this,t),this.search=(0,s.am)(e,c),this.list=(0,s.am)(i,c),this.callback=a,this.search&&this.list&&this.init()}return(0,a.Z)(t,[{key:"init",value:function(){var t=this;this.list.addEventListener("click",this),this.search.addEventListener("input",this),this.search.value="",r.length?this.renderCities(r):fetch(c).then((function(t){return t.json()})).then((function(e){r=e,t.renderCities(r)})).catch((function(t){}))}},{key:"renderCities",value:function(t,e){var i="";t.forEach((function(t){var n=t.name,a="";e?n=t.name.replace(RegExp(e,"gi"),"<mark>$&</mark>"):"city-spb"!==t.id&&"city-msk"!==t.id||(a="big-city"),i+='\n        <button class="custom-search__label '.concat(a,"\" data-city='").concat(JSON.stringify(t),"'>").concat(n,"</button>\n        ")})),this.list.innerHTML=i}},{key:"handleEvent",value:function(t){if("click"===t.type){var e=t.target.closest("[data-city]");if(e){this.search.value=e.innerText;var i=JSON.parse(e.dataset.city);this.callback(i)}}"input"===t.type&&(t.target.value=t.target.value.replace(/[\d\s]/,""),t.target.value.length>=2?this.getData(t.target.value):this.renderCities(r))}},{key:"getData",value:function(t){var e=this;fetch("data/cities.json?city="+t).then((function(t){return t.json()})).then((function(i){e.renderCities(i,t)}))}},{key:"destroy",value:function(){this.list.removeEventListener("click",this),this.search.removeEventListener("input",this)}}]),t}()}}]);