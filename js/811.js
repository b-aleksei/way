(self.webpackChunk=self.webpackChunk||[]).push([[811],{5811:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var i=n(4549);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c="data/defaultCities.json",s=[];fetch(c).then((function(t){return t.json()})).then((function(t){return s=t})).catch((function(t){}));var u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};a(this,t),this.search=(0,i.am)(e),this.list=(0,i.am)(n),this.callback=r,this.search&&this.list&&this.init()}var e,n;return e=t,(n=[{key:"init",value:function(){var t=this;this.list.addEventListener("click",this),this.search.addEventListener("input",this),this.search.value="",s.length?this.renderCities(s):fetch(c).then((function(t){return t.json()})).then((function(e){s=e,t.renderCities(s)})).catch((function(t){}))}},{key:"renderCities",value:function(t,e){var n="";t.forEach((function(t){var i=t.name,a="";e?i=t.name.replace(RegExp(e,"gi"),"<mark>$&</mark>"):"city-spb"!==t.id&&"city-msk"!==t.id||(a="big-city"),n+='\n        <button class="custom-search__label '.concat(a,"\" data-city='").concat(JSON.stringify(t),"'>").concat(i,"</button>\n        ")})),this.list.innerHTML=n}},{key:"handleEvent",value:function(t){if("click"===t.type){var e=t.target.closest("[data-city]");if(e){this.search.value=e.innerText;var n=JSON.parse(e.dataset.city);this.callback(n)}}"input"===t.type&&(t.target.value=t.target.value.replace(/[\d\s]/,""),t.target.value.length>=2?this.getData(t.target.value):this.renderCities(s))}},{key:"getData",value:function(t){var e=this;fetch("data/cities.json?city="+t).then((function(t){return t.json()})).then((function(n){e.renderCities(n,t)}))}},{key:"destroy",value:function(){this.list.removeEventListener("click",this),this.search.removeEventListener("input",this)}}])&&r(e.prototype,n),t}()}}]);